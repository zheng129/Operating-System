The program does not get the perfect output every time, but works pretty well.

I chose to use the mutex lock to implement the semaphore because all other ways I tried kind of did not work. And now I just missed the deadline to submit the code and output I had ready couple hours ago...

References:

https://stackoverflow.com/questions/4792449/c0x-has-no-semaphores-how-to-synchronize-threads

https://stackoverflow.com/questions/43023364/using-binary-semaphores-to-synchronize-2-threads-c